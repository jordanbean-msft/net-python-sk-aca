### AI Service API Testing
### Use the REST Client extension in VS Code to run these requests
### Tests the multi-agent system with CoordinatorAgent and QueryAgent (weather tool)

@baseUrl = http://localhost:8000

###############################################################################
# Health & Info Endpoints
###############################################################################

### Health Check
GET {{baseUrl}}/health

### Root Endpoint
GET {{baseUrl}}/

###############################################################################
# Weather Queries - Testing Agent Handoff & Tool Calling
###############################################################################

### Weather Query - Houston (Non-streaming)
# Should trigger: CoordinatorAgent -> QueryAgent -> Weather Tool
POST {{baseUrl}}/api/chat
Content-Type: application/json

{
  "message": "What is the weather in Houston, TX?",
  "stream": false
}

### Weather Query - Multiple Cities (Non-streaming)
# Should trigger: CoordinatorAgent -> QueryAgent -> Weather Tool (multiple calls)
POST {{baseUrl}}/api/chat
Content-Type: application/json

{
  "message": "Can you tell me the weather in Seattle and New York?",
  "stream": false
}

### Weather Query - Natural Language (Streaming)
# Should trigger: CoordinatorAgent -> QueryAgent -> Weather Tool
POST {{baseUrl}}/api/chat/stream
Content-Type: application/json

{
  "message": "I'm planning a trip to San Francisco tomorrow. How's the weather looking?",
  "stream": true
}

### Weather Query - Casual Question (Streaming)
# Should trigger: CoordinatorAgent -> QueryAgent -> Weather Tool
POST {{baseUrl}}/api/chat/stream
Content-Type: application/json

{
  "message": "Should I bring an umbrella in Chicago today?",
  "stream": true
}

###############################################################################
# General Conversation - Testing CoordinatorAgent Direct Response
###############################################################################

### General Greeting (Non-streaming)
# Should be handled by CoordinatorAgent directly (no handoff)
POST {{baseUrl}}/api/chat
Content-Type: application/json

{
  "message": "Hello! What can you help me with?",
  "stream": false
}

### General Question (Non-streaming)
# Should be handled by CoordinatorAgent directly (no handoff)
POST {{baseUrl}}/api/chat
Content-Type: application/json

{
  "message": "Tell me about Azure Container Apps",
  "stream": false
}

### General Joke Request (Streaming)
# Should be handled by CoordinatorAgent directly (no handoff)
POST {{baseUrl}}/api/chat/stream
Content-Type: application/json

{
  "message": "Tell me a programming joke",
  "stream": true
}

###############################################################################
# Conversation with History - Testing Context Awareness
###############################################################################

### Weather Follow-up Question
# Should maintain context from previous weather query
POST {{baseUrl}}/api/chat
Content-Type: application/json

{
  "message": "What about tomorrow?",
  "history": {
    "messages": [
      {
        "role": "user",
        "content": "What is the weather in Boston?"
      },
      {
        "role": "assistant",
        "content": "The current weather in Boston is partly cloudy with a temperature of 72°F."
      }
    ]
  },
  "stream": false
}

### Mixed Conversation - Weather then General
POST {{baseUrl}}/api/chat
Content-Type: application/json

{
  "message": "Thanks! Can you also explain what Semantic Kernel is?",
  "history": {
    "messages": [
      {
        "role": "user",
        "content": "What's the weather in Miami?"
      },
      {
        "role": "assistant",
        "content": "The current weather in Miami is partly cloudy with a temperature of 72°F. Humidity is at 65%."
      }
    ]
  },
  "stream": false
}

### General then Weather
POST {{baseUrl}}/api/chat
Content-Type: application/json

{
  "message": "Actually, can you check the weather in Denver for me?",
  "history": {
    "messages": [
      {
        "role": "user",
        "content": "Hello! How are you?"
      },
      {
        "role": "assistant",
        "content": "Hello! I'm doing great, thank you for asking. How can I assist you today?"
      }
    ]
  },
  "stream": false
}

###############################################################################
# Edge Cases - Testing Agent Behavior
###############################################################################

### Ambiguous Weather Query
# Should still trigger QueryAgent to handle weather-related request
POST {{baseUrl}}/api/chat
Content-Type: application/json

{
  "message": "Is it nice outside in Portland?",
  "stream": false
}

### Weather + Additional Question
# Should handle both weather query and additional context
POST {{baseUrl}}/api/chat
Content-Type: application/json

{
  "message": "What's the weather in Austin and should I go for a run?",
  "stream": false
}

### Empty Message (Error Case)
POST {{baseUrl}}/api/chat
Content-Type: application/json

{
  "message": "",
  "stream": false
}
